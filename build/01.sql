CREATE TABLE IF NOT EXISTS `users` (
	`id` SMALLINT UNSIGNED NOT NULL AUTO INCREMENT PRIMARY KEY,
	`username` VARCHAR(32) NOT NULL,
	`displayname` VARCHAR(32) NOT NULL,
	`password` CHAR(32) NOT NULL,
	`active` TINYINT(1) UNSIGNED NOT NULL DEFAULT 1,
	`api_key` CHAR(40) NOT NULL
) ENGINE = InnoDB CHARACTER SET utf8 COLLATE utf8_general_ci;

CREATE TABLE IF NOT EXISTS `main_data` (
	`id` INT UNSIGNED NOT NULL AUTO INCREMENT PRIMARY KEY,
	`date_recorded` DATETIME NOT NULL,
	`text` TEXT CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL,
	`owner` SMALLINT UNSIGNED NOT NULL,
	`archived` TINYINT(1) UNSIGNED NOT NULL DEFAULT 0,
	FOREIGN KEY(`owner`) REFERENCES users(`id`) ON DELETE CASCADE
) ENGINE = InnoDB CHARACTER SET utf8 COLLATE utf8_general_ci;
